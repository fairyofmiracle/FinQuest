<!-- templates/base.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  {% load static %}
  <title>{% block title %}FinQuest{% endblock %}</title>
  <!-- –§–∞–≤–∏–∫–æ–Ω–∫–∞ –∏–∑ FontAwesome –∏–∫–æ–Ω–∫–∏ -->
  <style>
    .favicon {
      width: 16px;
      height: 16px;
      display: inline-block;
    }
  </style>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'><circle cx='256' cy='256' r='200' fill='%236366f1' stroke='%234f46e5' stroke-width='8'/><circle cx='200' cy='200' r='25' fill='%23fbbf24' stroke='%23f59e0b' stroke-width='3'/><circle cx='312' cy='200' r='25' fill='%23fbbf24' stroke='%23f59e0b' stroke-width='3'/><circle cx='200' cy='312' r='25' fill='%23fbbf24' stroke='%23f59e0b' stroke-width='3'/><circle cx='312' cy='312' r='25' fill='%23fbbf24' stroke='%23f59e0b' stroke-width='3'/><circle cx='256' cy='256' r='30' fill='%23fbbf24' stroke='%23f59e0b' stroke-width='4'/><text x='256' y='265' text-anchor='middle' font-family='Arial' font-size='20' font-weight='bold' fill='%23d97706'>‚ÇΩ</text></svg>">
  <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'css/inter-fonts.css' %}" rel="stylesheet">
  <link href="{% static 'css/fontawesome.min.css' %}" rel="stylesheet">
  <link href="{% static 'css/finquest.css' %}" rel="stylesheet">
  <link href="{% static 'css/finquest_tutorial_addon.css' %}" rel="stylesheet">
  <style>
    body { padding-bottom: 0; }
    .btn-lg { width: 100%; margin: 8px 0; }
    
    /* Footer Styles */
    .site-footer {
      background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
      padding: 3rem 0 1.5rem;
      margin-top: 5rem;
      border-top: 3px solid rgba(102, 126, 234, 0.3);
    }
    
    .footer-title {
      color: #667eea;
      font-weight: 700;
      font-size: 1.25rem;
      margin-bottom: 1rem;
    }
    
    .footer-text {
      color: #d1d5db;
      font-size: 0.95rem;
      line-height: 1.6;
    }
    
    .footer-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    
    .footer-list li {
      color: #d1d5db;
      padding: 0.5rem 0;
      font-size: 0.95rem;
    }
    
    .footer-list li i {
      color: #667eea;
    }
    
    .social-links {
      display: flex;
      gap: 1rem;
    }
    
    .social-link {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(102, 126, 234, 0.1);
      border-radius: 50%;
      color: #9ca3af;
      text-decoration: none;
      transition: all 0.3s ease;
      border: 2px solid transparent;
    }
    
    .social-link:hover {
      background: linear-gradient(135deg, #667eea, #764ba2);
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
      color: white;
    }
    
    .footer-bottom {
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      color: #9ca3af;
      font-size: 0.9rem;
    }
    
    /* –ö–Ω–æ–ø–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å –ø–µ—Ä–µ–ª–∏–≤–æ–º */
    .btn-register {
      background: linear-gradient(45deg, #10b981, #059669, #047857, #059669, #10b981);
      background-size: 200% 200%;
      border: none;
      color: white !important;
      animation: gradientShift 3s ease infinite;
    }
    
    .btn-register:hover {
      background: linear-gradient(45deg, #10b981, #059669, #047857, #059669, #10b981);
      background-size: 200% 200%;
      color: white !important;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
    }
    
    .btn-register:active,
    .btn-register:focus,
    .btn-register:visited {
      color: white !important;
      background: linear-gradient(45deg, #10b981, #059669, #047857, #059669, #10b981);
      background-size: 200% 200%;
      border: none;
      outline: none;
      box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
    }
    
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    /* –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π */
    .achievement-modal-content {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border: none;
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.3);
    }
    
    .achievement-celebration {
      color: white;
    }
    
    .achievement-icon-large {
      font-size: 4rem;
      color: #ffd700;
      animation: bounce 1s infinite alternate;
    }
    
    .achievement-title {
      font-size: 2rem;
      font-weight: bold;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    
    .achievement-description {
      font-size: 1.1rem;
      opacity: 0.9;
    }
    
    .achievement-rarity-badge {
      display: inline-block;
      padding: 8px 16px;
      border-radius: 20px;
      font-weight: bold;
      font-size: 0.9rem;
    }
    
    .rarity-common { background: #6c757d; }
    .rarity-uncommon { background: #28a745; }
    .rarity-rare { background: #007bff; }
    .rarity-legendary { background: #ffc107; color: #000; }
    
    @keyframes bounce {
      0% { transform: translateY(0); }
      100% { transform: translateY(-20px); }
    }
    
    /* –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ */
    #confetti-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 9999;
    }
    
    .confetti {
      position: absolute;
      width: 10px;
      height: 10px;
      background: #ff6b6b;
      animation: confetti-fall 3s linear infinite;
    }
    
    .confetti:nth-child(2n) { background: #4ecdc4; }
    .confetti:nth-child(3n) { background: #45b7d1; }
    .confetti:nth-child(4n) { background: #96ceb4; }
    .confetti:nth-child(5n) { background: #feca57; }
    .confetti:nth-child(6n) { background: #ff9ff3; }
    
    @keyframes confetti-fall {
      0% {
        transform: translateY(-100vh) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
      }
    }
  </style>
  <script src="{% static 'js/finquest.js' %}" defer></script>
  <script src="{% static 'js/tutorial.js' %}" defer></script>
</head>
<body>
  <nav class="navbar navbar-expand-lg gaming-navbar">
    <div class="container">
      <a class="navbar-brand" href="{% url 'dashboard' %}">
        <i class="fa-solid fa-money-bill-trend-up me-2"></i>FinQuest
      </a>
      {% if user.is_authenticated %}
        <div class="d-flex align-items-center gap-2">
          <button class="btn btn-sm btn-outline-light" onclick="toggleTheme()" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">
            <i class="fa-solid fa-moon" id="theme-icon"></i>
          </button>
          <a href="{% url 'media' %}" class="btn btn-outline-light">
            <i class="fa-solid fa-newspaper me-2"></i>–°—Ç–∞—Ç—å–∏
          </a>
          <div class="position-relative" style="display: inline-block;">
            <a href="{% url 'notifications_list' %}" class="btn btn-outline-light">
              <i class="fa-regular fa-bell me-2" style="color: white; font-size: 16px;"></i>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
            </a>
            {% if unread_notifications_count > 0 %}
              <span class="notification-badge" style="position: absolute; top: -8px; right: -8px; z-index: 9999; background: #ef4444 !important; color: white !important; border-radius: 50% !important; width: 22px !important; height: 22px !important; display: flex !important; align-items: center !important; justify-content: center !important; font-size: 0.7rem !important; font-weight: bold !important; padding: 0 !important; box-shadow: 0 2px 6px rgba(239, 68, 68, 0.5) !important; min-width: 22px !important;">
                {{ unread_notifications_count }}
              </span>
            {% endif %}
          </div>
          <a href="{% url 'profile' %}" class="btn btn-outline-light">
            <i class="fa-regular fa-user me-2"></i>–ü—Ä–æ—Ñ–∏–ª—å
          </a>
          <form method="post" action="{% url 'logout' %}" style="display: inline;">
            {% csrf_token %}
            <button type="submit" class="btn btn-sm btn-danger">
              <i class="fa-solid fa-sign-out-alt me-1"></i>–í—ã–π—Ç–∏
            </button>
          </form>
        </div>
      {% else %}
        <div class="d-flex align-items-center gap-2">
          <a href="{% url 'login' %}" class="btn btn-sm btn-primary" id="loginBtn">–í–æ–π—Ç–∏</a>
          <a href="{% url 'register' %}" class="btn btn-sm btn-register" id="registerBtn">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
        </div>
      {% endif %}
    </div>
  </nav>

  <div class="container mt-3">
    {% block content %}{% endblock %}
  </div>
  
  <!-- Footer -->
  <footer class="site-footer">
    <div class="container">
      <div class="row">
        <div class="col-md-3 mb-4">
          <h5 class="footer-title">–û –ø—Ä–æ–µ–∫—Ç–µ</h5>
          <p class="footer-text">FinQuest ‚Äî —ç—Ç–æ –∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç–∏ –≤ –∏–≥—Ä–æ–≤–æ–π —Ñ–æ—Ä–º–µ. –£—á–∏—Ç–µ—Å—å, —Ä–∞–∑–≤–∏–≤–∞–π—Ç–µ—Å—å –∏ –¥–æ—Å—Ç–∏–≥–∞–π—Ç–µ —Å–≤–æ–∏—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Ü–µ–ª–µ–π!</p>
        </div>
        <div class="col-md-3 mb-4">
          <h5 class="footer-title">–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</h5>
          <ul class="footer-list">
            <li><i class="fa-solid fa-check me-2"></i>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —É—Ä–æ–∫–∏</li>
            <li><i class="fa-solid fa-check me-2"></i>–°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π</li>
            <li><i class="fa-solid fa-check me-2"></i>–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞</li>
            <li><i class="fa-solid fa-check me-2"></i>–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Ç–∞—Ç—å–∏</li>
          </ul>
        </div>
        <div class="col-md-3 mb-4">
          <h5 class="footer-title">–ö–æ–º–∞–Ω–¥–∞</h5>
          <p class="footer-text mb-2"><i class="fa-solid fa-users me-2" style="color: #667eea;"></i><strong>–ö–æ–º–∞–Ω–¥–∞ "–î–∂—É–Ω—Ü—ã"</strong></p>
          <p class="footer-text mb-2"><i class="fa-solid fa-trophy me-2" style="color: #667eea;"></i>–ò–¢-–°–ø—Ä–∏–Ω—Ç 2025</p>
          <p class="footer-text mb-2"><i class="fa-solid fa-building me-2" style="color: #667eea;"></i>–ö–µ–π—Å –æ—Ç –∫–æ–º–ø–∞–Ω–∏–∏<br>"–ü—è—Ç—ã–π —ç–ª–µ–º–µ–Ω—Ç"</p>
        </div>
        <div class="col-md-3 mb-4">
          <h5 class="footer-title">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h5>
          <ul class="footer-list">
            <li><i class="fa-solid fa-envelope me-2"></i>info@finquest.ru</li>
            <li><i class="fa-solid fa-globe me-2"></i>www.finquest.ru</li>
          </ul>
          <div class="social-links mt-3">
            <a href="#" class="social-link" title="Telegram"><i class="fa-brands fa-telegram"></i></a>
            <a href="#" class="social-link" title="VK"><i class="fa-brands fa-vk"></i></a>
          </div>
        </div>
      </div>
      <div class="footer-bottom text-center mt-4 pt-4">
        <p class="mb-0">&copy; 2025 FinQuest by –ö–æ–º–∞–Ω–¥–∞ "–î–∂—É–Ω—Ü—ã". –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
      </div>
    </div>
  </footer>
  
  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π -->
  <div class="modal fade" id="achievementModal" tabindex="-1" aria-labelledby="achievementModalLabel" aria-hidden="true" data-bs-backdrop="false">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content achievement-modal-content">
        <div class="modal-body text-center p-4">
          <div class="achievement-celebration">
            <div class="achievement-icon-large mb-3" id="achievementIconContainer">
              <i class="fa-solid fa-trophy" id="achievementIcon"></i>
            </div>
            <h4 class="achievement-title mb-2" id="achievementTitle">üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</h4>
            <p class="achievement-description mb-3" id="achievementDescription">–í—ã –ø–æ–ª—É—á–∏–ª–∏ –Ω–æ–≤–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ!</p>
            <div class="achievement-rarity-badge mb-3" id="achievementRarity"></div>
            <button type="button" class="btn btn-primary btn-lg" onclick="closeAchievementModal()">
              <i class="fa-solid fa-check me-2"></i>–£—Ä–∞! üéâ
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
  <div id="confetti-container"></div>
  
  <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
  
  <script>
    // –°–∏—Å—Ç–µ–º–∞ —Ç–µ–º
    function toggleTheme() {
      const body = document.body;
      const themeIcon = document.getElementById('theme-icon');
      
      if (body.classList.contains('dark-theme')) {
        // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ —Å–≤–µ—Ç–ª—É—é —Ç–µ–º—É
        body.classList.remove('dark-theme');
        themeIcon.className = 'fa-solid fa-moon';
        localStorage.setItem('theme', 'light');
      } else {
        // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ —Ç–µ–º–Ω—É—é —Ç–µ–º—É
        body.classList.add('dark-theme');
        themeIcon.className = 'fa-solid fa-sun';
        localStorage.setItem('theme', 'dark');
      }
    }
    
    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é —Ç–µ–º—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    document.addEventListener('DOMContentLoaded', function() {
      const savedTheme = localStorage.getItem('theme');
      const themeIcon = document.getElementById('theme-icon');
      
      if (savedTheme === 'dark') {
        document.body.classList.add('dark-theme');
        if (themeIcon) {
          themeIcon.className = 'fa-solid fa-sun';
        }
      }
    });
    
    // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –∏ –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
    function showAchievement(achievementData) {
      const modal = new bootstrap.Modal(document.getElementById('achievementModal'), {
        backdrop: false,
        keyboard: true
      });
      const iconContainer = document.getElementById('achievementIconContainer');
      const title = document.getElementById('achievementTitle');
      const description = document.getElementById('achievementDescription');
      const rarity = document.getElementById('achievementRarity');
      
      // –û–ø—Ä–µ–¥–µ–ª—è–µ–º SVG –∏–∫–æ–Ω–∫—É –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
      let svgFile = 'trophy';
      const name = achievementData.name || '';
      
      if (name.includes('–ü–µ—Ä–≤—ã–π —à–∞–≥')) svgFile = 'first_step';
      else if (name.includes('–û—Ç–∫—Ä—ã—Ç—å —Ñ–∏–Ω–∞–Ω—Å–æ–≤—É—é –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç—å')) svgFile = 'unlock_literacy';
      else if (name.includes('–æ—Å–Ω–æ–≤–Ω—ã—Ö –∑–Ω–∞–Ω–∏–π')) svgFile = 'master_basics';
      else if (name.includes('–±–∞–∑–æ–≤—ã—Ö –Ω–∞–≤—ã–∫–æ–≤')) svgFile = 'master_skills';
      else if (name.includes('–±—é–¥–∂–µ—Ç–∏—Ä–æ–≤–∞–Ω–∏—è')) svgFile = 'master_budget';
      else if (name.includes('—Å–±–µ—Ä–µ–∂–µ–Ω–∏–π')) svgFile = 'master_savings';
      else if (name.includes('–∫—Ä–µ–¥–∏—Ç–æ–≤')) svgFile = 'master_credit';
      else if (name.includes('–±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö —É—Å–ª—É–≥')) svgFile = 'master_banking';
      else if (name.includes('–∞–∫—Ü–∏–æ–Ω–µ—Ä–∏—è') || name.includes('–ê–∫—Ü–∏')) svgFile = 'master_stocks';
      else if (name.includes('–¥–æ–ª–≥–æ–≤—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤') || name.includes('–û–±–ª–∏–≥–∞—Ü–∏')) svgFile = 'master_bonds';
      else if (name.includes('–Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏')) svgFile = 'master_realestate';
      else if (name.includes('–∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç')) svgFile = 'master_crypto';
      else if (name.includes('–ø–µ–Ω—Å–∏–æ–Ω')) svgFile = 'master_retirement';
      else if (name.includes('–Ω–∞–ª–æ–≥')) svgFile = 'master_taxes';
      else if (name.includes('—Å—Ç—Ä–∞—Ö–æ–≤')) svgFile = 'master_insurance';
      else if (name.includes('—Ü–µ–ª–µ–π') || name.includes('–ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏')) svgFile = 'master_goals';
      else if (name.includes('–º–æ—à–µ–Ω–Ω')) svgFile = 'master_fraud';
      else if (name.includes('–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏') || name.includes('–¥–∞–Ω–Ω—ã—Ö')) svgFile = 'master_privacy';
      else if (name.includes('—é—Ä–∏–¥–∏—á–µ—Å–∫–æ–π')) svgFile = 'master_legal';
      else if (name.includes('—Ä–∏—Å–∫')) svgFile = 'master_risks';
      else if (name.includes('–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è')) svgFile = 'master_planning';
      else if (name.includes('—Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏')) svgFile = 'master_security';
      else if (name.includes('—Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç–∏')) svgFile = 'master_financial';
      else if (achievementData.category === 'streak') svgFile = 'streak';
      else if (achievementData.category === 'points') svgFile = 'points';
      else if (achievementData.category === 'coins') svgFile = 'coins';
      else if (achievementData.rarity === 'legendary') svgFile = 'legendary';
      
      // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º SVG –∏–∫–æ–Ω–∫—É
      iconContainer.innerHTML = `<img src="/static/images/achievements/${svgFile}.svg" alt="${achievementData.name}" style="width: 100px; height: 100px; filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.3));">`;
      
      title.textContent = `üéâ ${achievementData.name}`;
      description.textContent = achievementData.description;
      
      // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–µ–¥–∫–æ—Å—Ç—å
      rarity.textContent = achievementData.rarity_display;
      rarity.className = `achievement-rarity-badge rarity-${achievementData.rarity}`;
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
      modal.show();
      
      // –ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
      createConfetti();
    }
    
    function closeAchievementModal() {
      const modal = bootstrap.Modal.getInstance(document.getElementById('achievementModal'));
      if (modal) {
        modal.hide();
      }
    }
    
    function createConfetti() {
      const container = document.getElementById('confetti-container');
      const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#ff9ff3'];
      
      // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
      container.innerHTML = '';
      
      // –°–æ–∑–¥–∞–µ–º 50 –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
      for (let i = 0; i < 50; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * 100 + '%';
        confetti.style.animationDelay = Math.random() * 3 + 's';
        confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.width = (Math.random() * 10 + 5) + 'px';
        confetti.style.height = confetti.style.width;
        
        container.appendChild(confetti);
        
        // –£–¥–∞–ª—è–µ–º –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
        setTimeout(() => {
          if (confetti.parentNode) {
            confetti.parentNode.removeChild(confetti);
          }
        }, 3000);
      }
    }
  </script>
  
  {% block extra_js %}{% endblock %}
</body>
</html>