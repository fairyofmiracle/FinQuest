<!-- templates/accounts/profile.html -->
{% extends 'base.html' %}
{% load static %}

{% block title %}–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å ‚Äî FinQuest{% endblock %}
{% block page_title %}üë§ –ü—Ä–æ—Ñ–∏–ª—å{% endblock %}

{% block content %}
<div class="profile-page">
    <div class="row">
    <!-- –õ–µ–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
    <div class="col-lg-4 col-md-5 mb-4">
      <div class="card gaming-profile-card h-100" style="height: 800px; overflow: hidden;">
        <div class="card-body text-center">
          <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (—Ç–æ–ª—å–∫–æ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö) -->
          <div class="mobile-profile-container">
            <!-- –ê–≤–∞—Ç–∞—Ä –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ -->
            <div class="mb-4">
              <!-- DEBUG: avatar={{ user.avatar }}, default_avatar={{ user.default_avatar }}, get_avatar_display={{ user.get_avatar_display }} -->
              {% if user.get_avatar_display %}
                <img src="{{ user.get_avatar_display }}" class="shadow-lg profile-avatar {{ user.get_avatar_border_class }}" alt="–ê–≤–∞—Ç–∞—Ä">
              {% else %}
                <div class="bg-gradient-primary text-white d-flex align-items-center justify-content-center shadow-lg mx-auto profile-avatar-placeholder {{ user.get_avatar_border_class }}">
                  {{ user.username|first|upper }}
                </div>
              {% endif %}
              
              <!-- –ò–º—è –∏ –∑–≤–∞–Ω–∏–µ —Å–ø—Ä–∞–≤–∞ –æ—Ç –∞–≤–∞—Ç–∞—Ä–∞ - –¢–û–õ–¨–ö–û –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö -->
              <div class="mobile-user-info">
                <h3 class="profile-name mb-2">{{ user.get_full_name|default:user.username }}</h3>
                <p class="profile-title mb-3">{{ user.get_level_title }}</p>
              </div>
            </div>
            
            <!-- Clearfix –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö -->
            <div class="mobile-user-header-clearfix"></div>
            
            <!-- –ò–º—è –∏ –∑–≤–∞–Ω–∏–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É - –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞ (—Å–∫—Ä—ã—Ç–æ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö) -->
            <div class="desktop-user-info">
              <h3 class="profile-name mb-2">{{ user.get_full_name|default:user.username }}</h3>
              <p class="profile-title mb-3">{{ user.get_level_title }}</p>
            </div>
            
            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div class="profile-stats">
            <!-- –î–µ—Å–∫—Ç–æ–ø –≤–µ—Ä—Å–∏—è: 3 –∫–æ–ª–æ–Ω–∫–∏ –ø–æ —Ü–µ–Ω—Ç—Ä—É -->
            <div class="row g-3 desktop-stats">
              <div class="col-4">
                <div class="stat-item text-center">
                  <div class="stat-icon">üéØ</div>
                  <div class="stat-value">{{ user.points }}</div>
                  <div class="stat-label">–û—á–∫–∏</div>
                </div>
              </div>
              <div class="col-4">
                <div class="stat-item text-center">
                  <div class="stat-icon">ü™ô</div>
                  <div class="stat-value">{{ user.coins }}</div>
                  <div class="stat-label">–ú–æ–Ω–µ—Ç—ã</div>
                </div>
              </div>
              <div class="col-4">
                <div class="stat-item text-center">
                  <div class="stat-icon">‚≠ê</div>
                  <div class="stat-value">{{ user.get_level_number }}</div>
                  <div class="stat-label">–£—Ä–æ–≤–µ–Ω—å</div>
                </div>
              </div>
            </div>
            
            <!-- –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è: —Å–µ—Ç–∫–∞ 2x2 –∫–∞–∫ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π -->
            <div class="mobile-stats-grid">
              <div class="mobile-stat-card haptic-light">
                <div class="mobile-stat-icon" style="background: linear-gradient(135deg, #667eea, #764ba2);">
                  üéØ
                </div>
                <div class="mobile-stat-content">
                  <div class="mobile-stat-value">{{ user.points }}</div>
                  <div class="mobile-stat-label">–û—á–∫–∏</div>
                </div>
              </div>
              
              <div class="mobile-stat-card haptic-light">
                <div class="mobile-stat-icon" style="background: linear-gradient(135deg, #f093fb, #f5576c);">
                  ü™ô
                </div>
                <div class="mobile-stat-content">
                  <div class="mobile-stat-value">{{ user.coins }}</div>
                  <div class="mobile-stat-label">–ú–æ–Ω–µ—Ç—ã</div>
                </div>
              </div>
              
              <div class="mobile-stat-card haptic-light">
                <div class="mobile-stat-icon" style="background: linear-gradient(135deg, #4facfe, #00f2fe);">
                  üî•
                </div>
                <div class="mobile-stat-content">
                  <div class="mobile-stat-value">{{ user.streak_days }}</div>
                  <div class="mobile-stat-label">–°–µ—Ä–∏—è</div>
                </div>
              </div>
              
              <div class="mobile-stat-card haptic-light">
                <div class="mobile-stat-icon" style="background: linear-gradient(135deg, #43e97b, #38f9d7);">
                  ‚≠ê
                </div>
                <div class="mobile-stat-content">
                  <div class="mobile-stat-value">{{ user.get_level_number }}</div>
                  <div class="mobile-stat-label">–£—Ä–æ–≤–µ–Ω—å</div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å –Ω–∞–≤—ã–∫–æ–≤ -->
          <div class="profile-skills">
            <h6 class="skills-title mb-3">
              <i class="fa-solid fa-chart-line me-2"></i>–ù–∞–≤—ã–∫–∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç–∏
            </h6>
            {% for category_key, category in categories.items %}
              <div class="skill-progress-item mb-2">
                <div class="d-flex justify-content-between align-items-center mb-1">
                  <span class="skill-name">{{ category.name }}</span>
                  <span class="skill-percent">{{ category.progress_percent }}%</span>
                </div>
                <div class="progress skill-progress-bar" style="height: 6px;">
                  <div class="progress-bar skill-bar" role="progressbar" 
                       style="width: {{ category.progress_percent }}%;"
                       data-skill="{{ category.name }}"
                       data-percent="{{ category.progress_percent }}"></div>
                </div>
                <small class="text-muted">{{ category.completed_levels }} –∏–∑ {{ category.total_levels }} —É—Ä–æ–≤–Ω–µ–π</small>
              </div>
            {% empty %}
              <p class="text-muted small mb-0">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –Ω–∞–≤—ã–∫–∞—Ö.</p>
            {% endfor %}
          </div>
          
          <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
          <div class="profile-actions">
            <a href="{% url 'settings' %}" class="btn btn-outline-primary btn-sm me-2">
              <i class="fa-solid fa-cog me-1"></i>–ù–∞—Å—Ç—Ä–æ–π–∫–∏
            </a>
            <a href="{% url 'dashboard' %}" class="btn btn-primary btn-sm">
              <i class="fa-solid fa-home me-1"></i>–î–∞—à–±–æ—Ä–¥
            </a>
          </div>
          </div>
          <!-- –ö–æ–Ω–µ—Ü –æ–±—â–µ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
        </div>
    </div>
    
    <!-- –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å —Å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º–∏ -->
    <div class="col-lg-8 col-md-7 {% if mobile_view %}mobile-achievements-hidden{% endif %}">
      <!-- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è -->
      <div class="card gaming-achievements-card h-100">
        <div class="card-header">
          <h4 class="mb-0"><i class="fa-solid fa-trophy me-2"></i>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h4>
        </div>
        <div class="card-body d-flex flex-column">
          {% if achievements %}
            <div class="achievements-wrapper">
              <div class="achievements-container">
                {% for achievement_data in achievements %}
                <div class="achievement-card {% if not achievement_data.earned %}achievement-locked{% endif %} {{ achievement_data.achievement.get_rarity_class }}" 
                     onclick="flipAchievement(this)">
                  <div class="achievement-card-inner">
                    <!-- –õ–∏—Ü–µ–≤–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ -->
                    <div class="achievement-front">
                    <div class="achievement-icon mb-2 achievement-icon-{{ achievement_data.achievement.rarity }}">
                      {% if achievement_data.earned %}
                        {% load static %}
                        <img src="{% static 'images/achievements/' %}{% if '–ü–µ—Ä–≤—ã–π —à–∞–≥' in achievement_data.achievement.name %}first_step{% elif '–û—Ç–∫—Ä—ã—Ç—å —Ñ–∏–Ω–∞–Ω—Å–æ–≤—É—é –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç—å' in achievement_data.achievement.name %}unlock_literacy{% elif '–æ—Å–Ω–æ–≤–Ω—ã—Ö –∑–Ω–∞–Ω–∏–π' in achievement_data.achievement.name %}master_basics{% elif '–±–∞–∑–æ–≤—ã—Ö –Ω–∞–≤—ã–∫–æ–≤' in achievement_data.achievement.name %}master_skills{% elif '–±—é–¥–∂–µ—Ç–∏—Ä–æ–≤–∞–Ω–∏—è' in achievement_data.achievement.name %}master_budget{% elif '—Å–±–µ—Ä–µ–∂–µ–Ω–∏–π' in achievement_data.achievement.name %}master_savings{% elif '–∫—Ä–µ–¥–∏—Ç–æ–≤' in achievement_data.achievement.name %}master_credit{% elif '–±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö —É—Å–ª—É–≥' in achievement_data.achievement.name %}master_banking{% elif '–∞–∫—Ü–∏–æ–Ω–µ—Ä–∏—è' in achievement_data.achievement.name or '–ê–∫—Ü–∏' in achievement_data.achievement.name %}master_stocks{% elif '–¥–æ–ª–≥–æ–≤—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤' in achievement_data.achievement.name or '–û–±–ª–∏–≥–∞—Ü–∏' in achievement_data.achievement.name %}master_bonds{% elif '–Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏' in achievement_data.achievement.name %}master_realestate{% elif '–∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç' in achievement_data.achievement.name %}master_crypto{% elif '–ø–µ–Ω—Å–∏–æ–Ω' in achievement_data.achievement.name %}master_retirement{% elif '–Ω–∞–ª–æ–≥' in achievement_data.achievement.name %}master_taxes{% elif '—Å—Ç—Ä–∞—Ö–æ–≤' in achievement_data.achievement.name %}master_insurance{% elif '—Ü–µ–ª–µ–π' in achievement_data.achievement.name or '–ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏' in achievement_data.achievement.name %}master_goals{% elif '–º–æ—à–µ–Ω–Ω' in achievement_data.achievement.name %}master_fraud{% elif '–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏' in achievement_data.achievement.name or '–¥–∞–Ω–Ω—ã—Ö' in achievement_data.achievement.name %}master_privacy{% elif '—é—Ä–∏–¥–∏—á–µ—Å–∫–æ–π' in achievement_data.achievement.name %}master_legal{% elif '—Ä–∏—Å–∫' in achievement_data.achievement.name %}master_risks{% elif '–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è' in achievement_data.achievement.name %}master_planning{% elif '—Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏' in achievement_data.achievement.name %}master_security{% elif '—Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç–∏' in achievement_data.achievement.name %}master_financial{% elif achievement_data.achievement.category == 'streak' %}streak{% elif achievement_data.achievement.category == 'points' %}points{% elif achievement_data.achievement.category == 'coins' %}coins{% elif achievement_data.achievement.rarity == 'legendary' %}legendary{% else %}trophy{% endif %}.svg" 
                             alt="{{ achievement_data.achievement.name }}" 
                             class="achievement-svg" />
                      {% else %}
                        <i class="fa-solid fa-lock"></i>
                      {% endif %}
                    </div>
                    <div class="achievement-name small">{{ achievement_data.achievement.name }}</div>
                    <div class="achievement-rarity text-muted" style="font-size: 0.6rem;">
                      {{ achievement_data.achievement.get_rarity_display }}
                    </div>
                    {% if achievement_data.earned and achievement_data.earned_at %}
                      <div class="achievement-date text-muted" style="font-size: 0.7rem;">{{ achievement_data.earned_at|date:"d.m.Y" }}</div>
                      {% endif %}
                    </div>
                    
                    <!-- –û–±—Ä–∞—Ç–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö) -->
                    {% if achievement_data.earned %}
                      <div class="achievement-back">
                        <div class="achievement-description">
                          <h6 class="achievement-back-title">üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–æ!</h6>
                          <p class="achievement-back-text">{{ achievement_data.achievement.description }}</p>
                          <div class="achievement-back-date">
                            <i class="fa-solid fa-calendar me-1"></i>
                            {{ achievement_data.earned_at|date:"d.m.Y –≤ H:i" }}
                          </div>
                          <div class="achievement-back-emoji">
                            {% if achievement_data.achievement.rarity == 'common' %}ü•â{% elif achievement_data.achievement.rarity == 'uncommon' %}ü•à{% elif achievement_data.achievement.rarity == 'rare' %}ü•á{% elif achievement_data.achievement.rarity == 'legendary' %}üíé{% endif %}
                          </div>
                        </div>
                      </div>
                    {% endif %}
                  </div>
                </div>
                {% endfor %}
              </div>
            </div>
          {% else %}
            <div class="text-center py-4">
              <div class="text-muted mb-2">üéØ</div>
              <p class="text-muted">–ù–µ—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π. –ü—Ä–æ–π–¥–∏ –ø–µ—Ä–≤—ã–π —É—Ä–æ–≤–µ–Ω—å!</p>
            </div>
          {% endif %}
        </div>
      </div>
      </div>
    </div>
  </div>
</div>

<!-- –í—Å–ø–ª—ã–≤–∞—é—â–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ -->
<div id="achievementPopup" class="achievement-popup" style="display: none;">
  <div class="achievement-popup-content">
    <div class="achievement-popup-header">
      <button type="button" class="achievement-popup-close" onclick="closeAchievementPopup()">
        <i class="fa-solid fa-times"></i>
      </button>
    </div>
    <div class="achievement-popup-body">
      <div id="achievementPopupContent">
        <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ JavaScript -->
      </div>
    </div>
  </div>
</div>

<!-- –°—Ç–∏–ª–∏ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π -->
<style>
/* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è (–¥–µ—Å–∫—Ç–æ–ø) */
.profile-avatar {
    width: 200px;
    height: 200px;
    border-radius: 20px;
    object-fit: cover;
    display: block;
    margin: 0 auto;
}

.profile-avatar-placeholder {
    width: 200px;
    height: 200px;
    border-radius: 20px;
    font-size: 48px;
    font-weight: bold;
}

/* –°–∫—Ä—ã–≤–∞–µ–º mobile-user-info –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ */
.mobile-user-info {
    display: none;
}

.mobile-user-header-clearfix {
    display: none;
}

/* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –¥–µ—Å–∫—Ç–æ–ø —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ */
.mobile-stats-grid {
    display: none;
}

.desktop-stats {
    display: flex;
}

/* –£–±–∏—Ä–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ */
.mobile-profile-container {
    background: transparent !important;
    border: none !important;
    padding: 0 !important;
    margin: 0 !important;
    box-shadow: none !important;
}

/* –ú–æ–±–∏–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è */
@media (max-width: 768px) {
    /* –û–±—â–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è - –∫–∞–∫ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π (–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π –≤ —Å–≤–µ—Ç–ª–æ–π —Ç–µ–º–µ) */
    .mobile-profile-container {
        background: transparent !important;
        backdrop-filter: none !important;
        border: none !important;
        border-radius: 0;
        padding: 0;
        margin: 0;
        box-shadow: none !important;
    }
    
    body.dark-theme .mobile-profile-container {
        background: transparent !important;
        border: none !important;
    }
    
    /* –£–º–µ–Ω—å—à–∞–µ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ */
    .mobile-profile-container .mb-4 {
        margin-bottom: 10px !important;
    }
    
    .mobile-user-header-clearfix {
        height: 10px !important;
    }
    
    /* –°–∫—Ä—ã–≤–∞–µ–º desktop-user-info –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
    .desktop-user-info {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        height: 0 !important;
        overflow: hidden !important;
    }
    
    /* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–±–∏–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É, —Å–∫—Ä—ã–≤–∞–µ–º –¥–µ—Å–∫—Ç–æ–ø–Ω—É—é */
    .desktop-stats {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        height: 0 !important;
        overflow: hidden !important;
    }
    
    .desktop-stats * {
        display: none !important;
    }
    
    .mobile-stats-grid {
        display: grid !important;
        visibility: visible !important;
        opacity: 1 !important;
    }
    
    /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ —Å body.mobile-view */
    body.mobile-view .desktop-stats,
    body.mobile-view .desktop-user-info {
        display: none !important;
        visibility: hidden !important;
        height: 0 !important;
        overflow: hidden !important;
    }
    
    body.mobile-view .mobile-stats-grid {
        display: grid !important;
    }
    
    /* –£–±–∏—Ä–∞–µ–º –≤—Å–µ –æ—Ç—Å—Ç—É–ø—ã –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
    body {
        padding: 0 !important;
    }
    
    .profile-page {
        margin: 0 !important;
        padding: 0 !important;
        width: 100vw !important;
    }
    
    /* –£–±–∏—Ä–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –æ—Ç—Å—Ç—É–ø—ã */
    .profile-page .container-fluid {
        max-width: 100% !important;
        padding-left: 0 !important;
        padding-right: 0 !important;
        margin: 0 !important;
        width: 100% !important;
    }
    
    .profile-page .row {
        margin-left: 0 !important;
        margin-right: 0 !important;
        width: 100% !important;
    }
    
    .profile-page .col-lg-4,
    .profile-page .col-md-5,
    .profile-page .col-lg-8,
    .profile-page .col-md-7,
    .profile-page .mb-4 {
        padding-left: 0 !important;
        padding-right: 0 !important;
        margin-bottom: 0 !important;
        width: 100% !important;
        max-width: 100% !important;
    }
    
    /* –£–º–µ–Ω—å—à–∞–µ–º —Ñ–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è –∏ –¥–µ–ª–∞–µ–º –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π layout */
    .profile-avatar,
    .profile-avatar-placeholder {
        width: 120px !important;
        height: 120px !important;
        border-radius: 20px !important;
        margin-top: 20px !important;
        margin-bottom: 0px !important;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.5) !important;
        float: left !important;
        margin-right: 15px !important;
    }
    
    .profile-avatar-placeholder {
        font-size: 48px !important;
    }
    
    /* –û—Ç—Å—Ç—É–ø –¥–ª—è –∞–≤–∞—Ç–∞—Ä–∞ */
    .mb-4 {
        margin-bottom: 0px !important;
        overflow: hidden !important;
    }
    
    /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –Ω–∏–∫–∞ –∏ —É—Ä–æ–≤–Ω—è —Å–ø—Ä–∞–≤–∞ –æ—Ç –∞–≤–∞—Ç–∞—Ä–∞ - —Ç–æ–ª—å–∫–æ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
    .mobile-user-info {
        display: block !important;
        overflow: hidden;
        padding-top: 25px;
        text-align: left !important;
    }
    
    /* –û—á–∏—Å—Ç–∫–∞ float –ø–æ—Å–ª–µ –±–ª–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è */
    .mobile-user-header-clearfix {
        clear: both;
        display: block;
        height: 20px;
    }
    
    /* –°–∫—Ä—ã–≤–∞–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
    .mobile-achievements-hidden {
        display: none !important;
    }
    
    /* –£–±–∏—Ä–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫—É –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö - –¥–µ–ª–∞–µ–º –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω */
    .gaming-profile-card {
        background: transparent !important;
        backdrop-filter: none !important;
        border: none !important;
        box-shadow: none !important;
        border-radius: 0 !important;
        margin-bottom: 0 !important;
    }
    
    .gaming-profile-card::before {
        display: none !important;
    }
    
    /* –¢–µ–∫—Å—Ç –ø—Ä–æ—Ñ–∏–ª—è –∫–∞–∫ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π */
    .profile-name {
        font-size: 1.5rem !important;
        color: #1f2937 !important;
        text-shadow: none !important;
        font-weight: 800 !important;
        margin-bottom: 8px !important;
        line-height: 1.2 !important;
    }
    
    .profile-title {
        font-size: 1.1rem !important;
        color: #6b7280 !important;
        text-shadow: none !important;
        font-weight: 700 !important;
        margin-bottom: 15px !important;
        line-height: 1.2 !important;
    }
    
    body.dark-theme .profile-name {
        color: #f1f5f9 !important;
    }
    
    body.dark-theme .profile-title {
        color: #9ca3af !important;
    }
    
    /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö - –≤–Ω—É—Ç—Ä–∏ –æ–±—â–µ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
    .mobile-profile-container .profile-stats {
        background: transparent !important;
        backdrop-filter: none !important;
        border: none !important;
        padding: 0px 0px !important;
        margin: 10px 0px !important;
        border-radius: 0 !important;
        box-shadow: none !important;
    }
    
    /* –ú–æ–±–∏–ª—å–Ω–∞—è —Å–µ—Ç–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (2x2 –∫–∞–∫ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π) */
    .mobile-profile-container .mobile-stats-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 0.75rem;
        padding: 0;
        margin-bottom: 1rem;
    }
    
    /* –ö–∞—Ä—Ç–æ—á–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ —Å—Ç–∏–ª–µ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
    .mobile-stat-card {
        background: white !important;
        border: 1px solid rgba(0, 0, 0, 0.05) !important;
        border-radius: 16px;
        padding: 1rem;
        display: flex;
        align-items: center;
        gap: 0.75rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08) !important;
        transition: all 0.2s ease;
    }
    
    .mobile-stat-card:active {
        transform: scale(0.95);
    }
    
    body.dark-theme .mobile-stat-card {
        background: linear-gradient(135deg, rgba(30, 41, 59, 0.98) 0%, rgba(51, 65, 85, 0.92) 100%) !important;
        border: 1px solid #475569 !important;
    }
    
    /* –ò–∫–æ–Ω–∫–∏ –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö - –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã –≤–∏–¥–Ω—ã */
    .mobile-stat-icon {
        width: 48px;
        height: 48px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        flex-shrink: 0;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
    
    /* –ö–æ–Ω—Ç–µ–Ω—Ç –∫–∞—Ä—Ç–æ—á–µ–∫ */
    .mobile-stat-content {
        flex: 1;
        min-width: 0;
    }
    
    .mobile-stat-value {
        font-size: 1.4rem;
        font-weight: 800;
        line-height: 1;
        margin-bottom: 0.25rem;
        color: #1f2937 !important;
        text-shadow: none;
    }
    
    .mobile-stat-label {
        font-size: 0.75rem;
        font-weight: 600;
        color: #6b7280 !important;
        text-shadow: none;
    }
    
    body.dark-theme .mobile-stat-value {
        color: #f1f5f9 !important;
    }
    
    body.dark-theme .mobile-stat-label {
        color: #9ca3af !important;
    }
    
    /* –£–±–∏—Ä–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞–≤—ã–∫–æ–≤ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö - —Ç–µ–ø–µ—Ä—å –≤–Ω—É—Ç—Ä–∏ –æ–±—â–µ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
    .mobile-profile-container .profile-skills {
        background: transparent !important;
        backdrop-filter: none !important;
        border: none !important;
        padding: 15px 5px !important;
        margin: 10px 0px !important;
        border-radius: 0 !important;
        box-shadow: none !important;
    }
    
    .skills-title {
        color: #1f2937 !important;
        text-shadow: none !important;
        font-size: 1.05rem !important;
        font-weight: 700 !important;
        margin-bottom: 15px !important;
    }
    
    .skills-title i {
        color: #1f2937 !important;
    }
    
    .skill-name {
        color: #1f2937 !important;
        font-weight: 600 !important;
        font-size: 0.85rem !important;
        text-shadow: none !important;
    }
    
    .skill-percent {
        color: #10b981 !important;
        font-weight: 700 !important;
        font-size: 0.85rem !important;
        text-shadow: none !important;
    }
    
    body.dark-theme .skills-title,
    body.dark-theme .skills-title i,
    body.dark-theme .skill-name {
        color: #f1f5f9 !important;
    }
    
    body.dark-theme .skill-percent {
        color: #10b981 !important;
    }
    
    /* –ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã */
    .skill-progress-bar {
        height: 6px !important;
        background: rgba(0, 0, 0, 0.4) !important;
        border-radius: 6px !important;
        margin: 6px 0 !important;
    }
    
    .progress-bar {
        background: linear-gradient(90deg, #10b981, #059669) !important;
        border-radius: 6px !important;
    }
    
    
    .skill-progress-item {
        margin-bottom: 15px !important;
    }
    
    .skill-progress-item small {
        color: #6b7280 !important;
        font-size: 0.75rem !important;
        text-shadow: none !important;
    }
    
    body.dark-theme .skill-progress-item small {
        color: #9ca3af !important;
    }
    
    /* –ö–Ω–æ–ø–∫–∏ - —Ç–µ–ø–µ—Ä—å –≤–Ω—É—Ç—Ä–∏ –æ–±—â–µ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
    .mobile-profile-container .profile-actions {
        margin-top: 15px !important;
        padding: 0 5px !important;
    }
    
    .profile-actions .btn {
        font-weight: 700 !important;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4) !important;
        font-size: 1.1rem !important;
        padding: 14px 28px !important;
        margin: 8px !important;
        color: #ffffff !important;
    }
    
    .profile-actions .btn i {
        color: #ffffff !important;
    }
    
    /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
    .card-body {
        padding: 30px 15px !important;
    }
}

.achievements-wrapper {
    overflow-x: hidden;
    overflow-y: auto; /* –í–∫–ª—é—á–∞–µ–º –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—É—é –ø—Ä–æ–∫—Ä—É—Ç–∫—É */
    flex: 1;
    width: 100%;
    padding: 10px 0;
    max-height: 800px; /* –í—ã—Å–æ—Ç–∞ –¥–ª—è 4 —Ä—è–¥–æ–≤ (4 * 180px + 3 * 15px + padding) */
}

.achievements-wrapper::-webkit-scrollbar {
    width: 8px;
    height: 0px;
}

.achievements-wrapper::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.1);
    border-radius: 4px;
}

.achievements-wrapper::-webkit-scrollbar-thumb {
    background: linear-gradient(135deg, #6f42c1, #8b5cf6);
    border-radius: 4px;
}

.achievements-wrapper::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(135deg, #5a2d91, #7c3aed);
}

.achievements-container {
    display: grid;
    grid-template-columns: repeat(4, 1fr); /* 4 –∫–æ–ª–æ–Ω–∫–∏ —Ä–∞–≤–Ω–æ–π —à–∏—Ä–∏–Ω—ã */
    gap: 15px;
    padding: 0;
    min-height: 0;
    align-content: start;
    width: 100%; /* –ù–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É */
}

.achievement-card {
    perspective: 1000px;
    cursor: pointer;
    height: 180px;
    width: 100%; /* –ó–∞–Ω–∏–º–∞–µ—Ç –≤—Å—é —à–∏—Ä–∏–Ω—É —è—á–µ–π–∫–∏ —Å–µ—Ç–∫–∏ */
    border-radius: 15px;
    overflow: hidden;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
}

.achievement-card:hover {
    transform: translateY(-5px) scale(1.02);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
}

/* –ü–µ—Ä–µ–≤–æ—Ä–æ—Ç –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π */
.achievement-card:not(.achievement-locked):hover .achievement-card-inner {
    transform: rotateY(180deg);
}

/* –≠—Ñ—Ñ–µ–∫—Ç –¥–ª—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
.achievement-card.achievement-locked:hover {
    transform: translateY(-3px) scale(1.01);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
    opacity: 0.8;
}

.achievement-card-inner {
    position: relative;
    width: 100%;
    height: 100%;
    text-align: center;
    transition: transform 0.6s ease;
    transform-style: preserve-3d;
}

.achievement-card.flipped .achievement-card-inner {
    transform: rotateY(180deg);
}

.achievement-front, .achievement-back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    border-radius: 15px;
    padding: 15px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.9) 100%);
    border: 1px solid rgba(111, 66, 193, 0.2);
}

.achievement-back {
    transform: rotateY(180deg);
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
}

.achievement-back-title {
    font-size: 0.85rem;
    margin-bottom: 8px;
    font-weight: bold;
}

.achievement-back-text {
    font-size: 0.75rem;
    margin-bottom: 10px;
    text-align: center;
    line-height: 1.2;
}

.achievement-back-date {
    font-size: 0.65rem;
    opacity: 0.8;
    margin-bottom: 8px;
}

.achievement-back-emoji {
    font-size: 1.2rem;
}

.achievement-icon {
    font-size: 2.5rem; /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä –∏–∫–æ–Ω–∫–∏ */
    margin-bottom: 12px;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 80px;
    height: 80px;
    margin: 0 auto 12px;
}

.achievement-svg {
    width: 100%;
    height: 100%;
    object-fit: contain;
    filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.15));
    transition: all 0.3s ease;
}

.achievement-card:hover .achievement-svg {
    filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.25));
    transform: scale(1.05);
}

.achievement-name {
    font-weight: 600;
    margin-bottom: 8px;
    line-height: 1.2;
    font-size: 0.7rem;
}

.achievement-rarity {
    font-size: 0.6rem;
    margin-bottom: 8px;
}

.achievement-date {
    font-size: 0.65rem;
    opacity: 0.7;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –≤—Å–ø–ª—ã–≤–∞—é—â–µ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ */
.achievement-popup {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: fadeIn 0.3s ease;
}

.achievement-popup-content {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.9) 100%);
    border: 2px solid #6f42c1;
    border-radius: 20px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    max-width: 500px;
    width: 90%;
    max-height: 80vh;
    overflow: hidden;
    position: relative;
    animation: slideIn 0.4s ease;
}

.achievement-popup-header {
    position: absolute;
    top: 15px;
    right: 15px;
    z-index: 10;
}

.achievement-popup-close {
    background: rgba(255, 255, 255, 0.9);
    border: none;
    border-radius: 50%;
    width: 35px;
    height: 35px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
}

.achievement-popup-close:hover {
    background: #f8f9fa;
    transform: scale(1.1);
}

.achievement-popup-body {
    padding: 40px 30px 30px;
    text-align: center;
}

.achievement-detail {
    position: relative;
}

.achievement-detail-icon {
    margin-bottom: 20px;
}

.achievement-detail-icon i {
    font-size: 4rem;
    background: linear-gradient(135deg, #6f42c1, #8b5cf6);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: bounce 2s infinite;
}

.achievement-detail-name {
    font-size: 1.8rem;
    font-weight: bold;
    color: #2d3748;
    margin-bottom: 15px;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.achievement-detail-rarity {
    margin-bottom: 20px;
}

.achievement-detail-rarity .badge {
    font-size: 0.9rem;
    padding: 8px 16px;
    border-radius: 20px;
}

.achievement-detail-description {
    margin-bottom: 25px;
}

.achievement-detail-description p {
    font-size: 1.1rem;
    line-height: 1.6;
    color: #4a5568;
    font-style: italic;
    margin: 0;
}

.achievement-detail-date {
    padding: 15px;
    background: linear-gradient(135deg, rgba(111, 66, 193, 0.1), rgba(139, 92, 246, 0.1));
    border-radius: 15px;
    border: 1px solid rgba(111, 66, 193, 0.2);
}

.achievement-detail-date small {
    font-size: 0.9rem;
    color: #6f42c1;
    font-weight: 500;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes slideIn {
    from { 
        opacity: 0;
        transform: scale(0.8) translateY(-50px);
    }
    to { 
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

@keyframes bounce {
    0%, 20%, 50%, 80%, 100% {
        transform: translateY(0);
    }
    40% {
        transform: translateY(-10px);
    }
    60% {
        transform: translateY(-5px);
    }
}

@keyframes fadeOut {
    from { 
        opacity: 1;
        transform: scale(1) translateY(0);
    }
    to { 
        opacity: 0;
        transform: scale(0.8) translateY(-50px);
    }
}
</style>

<!-- –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–≤ –Ω–∞–≤—ã–∫–æ–≤ –∏ –ø–µ—Ä–µ–≤–æ—Ä–æ—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    const skillBars = document.querySelectorAll('.skill-bar');
    
    skillBars.forEach((bar, index) => {
        // –ü–æ–ª—É—á–∞–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç –∏–∑ data-–∞—Ç—Ä–∏–±—É—Ç–∞ –∏–ª–∏ –∏–∑ style
        const percent = bar.getAttribute('data-percent') || bar.style.width.replace('%', '');
        const targetWidth = percent + '%';
        
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é —à–∏—Ä–∏–Ω—É 0
        bar.style.width = '0%';
        
        // –ê–Ω–∏–º–∏—Ä—É–µ–º –∫ —Ü–µ–ª–µ–≤–æ–π —à–∏—Ä–∏–Ω–µ
        setTimeout(() => {
            bar.style.width = targetWidth;
        }, index * 200 + 100);
    });
});

// –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –¥–µ—Ç–∞–ª–µ–π –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
function flipAchievement(card) {
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
    if (!card.classList.contains('achievement-locked')) {
        showAchievementDetails(card);
    }
}

// –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –ø–µ—Ä–µ–≤–æ—Ä–æ—Ç –ø—Ä–∏ –∫–ª–∏–∫–µ (–æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏)
document.addEventListener('DOMContentLoaded', function() {
    const achievementCards = document.querySelectorAll('.achievement-card:not(.achievement-locked)');
    achievementCards.forEach(card => {
        card.addEventListener('click', function(e) {
            e.preventDefault();
            flipAchievement(this);
        });
    });
});

// –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –¥–µ—Ç–∞–ª–µ–π –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –≤–æ –≤—Å–ø–ª—ã–≤–∞—é—â–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–∏
function showAchievementDetails(card) {
    const achievementName = card.querySelector('.achievement-name').textContent;
    const achievementRarity = card.querySelector('.achievement-rarity').textContent;
    const achievementDate = card.querySelector('.achievement-date');
    // –ü–æ–ª—É—á–∞–µ–º –∏–∫–æ–Ω–∫—É (SVG –∏–ª–∏ Font Awesome)
    const achievementIconElement = card.querySelector('.achievement-icon img');
    const achievementIconHTML = achievementIconElement ? 
      `<img src="${achievementIconElement.src}" alt="Achievement" style="width: 80px; height: 80px;">` : 
      `<i class="${card.querySelector('.achievement-icon i')?.className || 'fa-solid fa-trophy'}"></i>`;
    
    // –ü–æ–ª—É—á–∞–µ–º –æ–ø–∏—Å–∞–Ω–∏–µ —Å –æ–±—Ä–∞—Ç–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω—ã –∫–∞—Ä—Ç–æ—á–∫–∏
    const achievementBack = card.querySelector('.achievement-back');
    const achievementDescription = achievementBack ? achievementBack.querySelector('.achievement-back-text').textContent : '–û–ø–∏—Å–∞–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ';
    
    // –°–æ–∑–¥–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤—Å–ø–ª—ã–≤–∞—é—â–µ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    const popupContent = `
        <div class="achievement-detail">
            <div class="achievement-detail-icon">
                ${achievementIconHTML}
            </div>
            <h3 class="achievement-detail-name">${achievementName}</h3>
            <div class="achievement-detail-rarity">
                <span class="badge bg-primary">${achievementRarity}</span>
            </div>
            <div class="achievement-detail-description">
                <p>${achievementDescription}</p>
            </div>
            ${achievementDate ? `
            <div class="achievement-detail-date">
                <small>
                    <i class="fa-solid fa-calendar me-1"></i>
                    –ü–æ–ª—É—á–µ–Ω–æ: ${achievementDate.textContent}
                </small>
            </div>
            ` : ''}
        </div>
    `;
    
    // –ó–∞–ø–æ–ª–Ω—è–µ–º –≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    document.getElementById('achievementPopupContent').innerHTML = popupContent;
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    document.getElementById('achievementPopup').style.display = 'flex';
    
    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ –∫–ª–∏–∫—É –Ω–∞ —Ñ–æ–Ω
    document.getElementById('achievementPopup').onclick = function(e) {
        if (e.target === this) {
            closeAchievementPopup();
        }
    };
}

// –§—É–Ω–∫—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è –≤—Å–ø–ª—ã–≤–∞—é—â–µ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
function closeAchievementPopup() {
    const popup = document.getElementById('achievementPopup');
    popup.style.animation = 'fadeOut 0.3s ease';
    setTimeout(() => {
        popup.style.display = 'none';
        popup.style.animation = 'fadeIn 0.3s ease';
    }, 300);
}
</script>
{% endblock %}