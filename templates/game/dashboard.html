{% extends 'base.html' %}
{% block title %}FinQuest ‚Äî –ì–ª–∞–≤–Ω–∞—è{% endblock %}

{% block content %}
<!-- –°—Ç–∞—Ç—É—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
<div class="user-summary text-center mb-4">
  <div class="mb-2">
    {% if user.avatar %}
      <img src="{{ user.avatar.url }}" class="rounded-circle shadow" width="70" height="70" alt="–ê–≤–∞—Ç–∞—Ä">
    {% else %}
      <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center shadow"
           style="width:70px; height:70px; font-size:24px; font-weight:bold;">
        {{ user.username|first|upper }}
      </div>
    {% endif %}
  </div>
  <h5 class="section-title"><i class="fa-regular fa-user"></i> {{ user.get_full_name|default:user.username }}</h5>
  <p class="text-muted">{{ user.get_level_title }} ‚Ä¢ –£—Ä–æ–≤–µ–Ω—å {{ user.level_number }}</p>
  <div class="d-flex justify-content-center gap-3 mb-3">
    <span class="badge bg-primary"><i class="fa-solid fa-star me-1"></i>–û—á–∫–∏: {{ user.points }}</span>
    <span class="badge bg-warning text-dark"><i class="fa-solid fa-coins me-1"></i>{{ user.coins }}</span>
  </div>
</div>

<!-- –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø -->
<div class="quick-actions mb-4 text-center">
  <a href="{% url 'media' %}" class="btn btn-outline-info btn-sm me-2">üìö –°—Ç–∞—Ç—å–∏</a>
  <a href="{% url 'notifications' %}" class="btn btn-outline-warning btn-sm me-2">
    üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è {% if unread_notifications and unread_notifications > 0 %}<span class="badge bg-danger">{{ unread_notifications }}</span>{% endif %}
  </a>
  <a href="{% url 'profile' %}" class="btn btn-outline-secondary btn-sm">üë§ –ü—Ä–æ—Ñ–∏–ª—å</a>
  
</div>

<!-- –¢–µ–º—ã -->
<h5 class="section-title"><i class="fa-solid fa-shield-halved"></i> –¢–µ–º—ã</h5>
{% for topic in topics %}
  <a href="{% url 'topic_levels' topic.id %}" class="text-decoration-none">
    <div class="card mb-3">
      <div class="card-body py-2">
        <div class="d-flex justify-content-between align-items-start">
          <div>
            <h6 class="mb-1">{{ topic.name }}</h6>
            <p class="text-muted small mb-0">{{ topic.description|truncatewords:6 }}</p>
          </div>
          <span class="badge bg-primary">{{ topic.progress.percent }}%</span>
        </div>
        <div class="progress mt-2" style="height: 5px;">
          <div class="progress-bar" role="progressbar" style="width: {{ topic.progress.percent }}%;"></div>
        </div>
      </div>
    </div>
  </a>
{% empty %}
  <p class="text-muted">–ù–µ—Ç —Ç–µ–º.</p>
{% endfor %}

{% endblock %}